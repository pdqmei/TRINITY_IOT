#
# TRINITY_IOT - Smart Environment Control System
# ESP-IDF Configuration
#

#
# Chip target
#
CONFIG_IDF_TARGET="esp32"

#
# Build type
#
CONFIG_APP_BUILD_TYPE_APP_2PART=y
CONFIG_APP_BUILD_TYPE_ELF=y

#
# Project name
#
CONFIG_PROJECT_NAME="TRINITY_IOT"

#
# Partition table
#
CONFIG_PARTITION_TABLE_SINGLE_APP=y
CONFIG_PARTITION_TABLE_CUSTOM=n
CONFIG_PARTITION_TABLE_CUSTOM_FILENAME=""
CONFIG_PARTITION_TABLE_OFFSET=0x8000

#
# Serial flasher config
#
CONFIG_ESPTOOLPY_PORT="/dev/ttyUSB0"
CONFIG_ESPTOOLPY_BAUD=115200
CONFIG_ESPTOOLPY_CHIP_RST_PIN=0
CONFIG_ESPTOOLPY_DTR=y
CONFIG_ESPTOOLPY_RTS=y
CONFIG_ESPTOOLPY_BEFORE="default_reset"
CONFIG_ESPTOOLPY_AFTER="hard_reset"
CONFIG_ESPTOOLPY_DELAY_BEFORE_RESET=0
CONFIG_ESPTOOLPY_DELAY_AFTER_RESET=0

#
# ESP32-specific
#
CONFIG_ESP32_DEFAULT_CPU_FREQ_80=n
CONFIG_ESP32_DEFAULT_CPU_FREQ_160=n
CONFIG_ESP32_DEFAULT_CPU_FREQ_240=y
CONFIG_ESP32_DEFAULT_CPU_FREQ_MHZ=240
CONFIG_ESP32_SPIRAM_SUPPORT=n
CONFIG_ESP32_WIFI_STATIC_RX_BUFFER_NUM=10
CONFIG_ESP32_WIFI_DYNAMIC_RX_BUFFER_NUM=32
CONFIG_ESP32_WIFI_STATIC_TX_BUFFER_NUM=10
CONFIG_ESP32_WIFI_TX_BUFFER_TYPE=0
CONFIG_ESP32_WIFI_NVS_ENABLED=y

#
# WiFi Configuration
#
CONFIG_ESP_WIFI_SOFTAP_SUPPORT=n
CONFIG_ESP_WIFI_STA_SUPPORT=y
CONFIG_ESP_WIFI_TXPOWER_CALIBRATION=y
CONFIG_ESP_WIFI_FTM_ENABLE=n
CONFIG_ESP_WIFI_11B_RATE_OPTIMIZATION=y
CONFIG_ESP_WIFI_AMPDU_RX_ENABLED=y
CONFIG_ESP_WIFI_AMPDU_TX_ENABLED=y
CONFIG_ESP_WIFI_NVS_ENABLED=y

#
# Logging Configuration
#
CONFIG_LOG_DEFAULT_LEVEL=3
CONFIG_LOG_DEFAULT_LEVEL_EMERG=y
CONFIG_LOG_LEVEL_MAIN=3
CONFIG_LOG_BOOTLOADER_LEVEL=2

#
# FreeRTOS Configuration
#
CONFIG_FREERTOS_HZ=100
CONFIG_FREERTOS_WATCHPOINT_END_OF_STACK=y
CONFIG_FREERTOS_PLACE_FUNCTIONS_INTO_FLASH=n
CONFIG_FREERTOS_ASSERT_FAIL_ABORT=y
CONFIG_FREERTOS_ENABLE_STATIC_TASK_CLEAN_UP=n
CONFIG_FREERTOS_TASK_FUNCTION_WRAPPER=y
CONFIG_FREERTOS_CHECK_STACKOVERFLOW_CANARY=y
CONFIG_FREERTOS_CHECK_STACKOVERFLOW_PTRVAL=n
CONFIG_FREERTOS_CHECK_STACKOVERFLOW_NONE=n

#
# Task Watchdog Configuration
#
CONFIG_TASK_WDT=y
CONFIG_TASK_WDT_TIMEOUT_S=15
CONFIG_TASK_WDT_CHECK_IDLE_TASK_CPU0=y
CONFIG_TASK_WDT_CHECK_IDLE_TASK_CPU1=y

#
# NVS Flash Configuration
#
CONFIG_NVS_FLASH_FREQ=40m
CONFIG_NVS_FLASH_MODE=dio
CONFIG_NVS_FLASH_SIZE="detect"

#
# I2C Configuration
#
CONFIG_I2C_ENABLE_DEBUG_LOG=n

#
# ADC Configuration
#
CONFIG_ADC_DISABLE_DAC=n
CONFIG_ADC_USE_S8_DMA=n

#
# GPIO Configuration
#
CONFIG_GPIO_CTRL_FUNC_IN_IRAM=n

#
# Driver Configuration
#
CONFIG_DRIVER_GPIO_ALLOW_ETM_CONTROL=n

#
# MQTT Configuration
#
CONFIG_MQTT_PROTOCOL_311=y
CONFIG_MQTT_PROTOCOL_5=n
CONFIG_MQTT_TRANSPORT_SSL=y
CONFIG_MQTT_TRANSPORT_WEBSOCKET=y
CONFIG_MQTT_TRANSPORT_WEBSOCKET_SECURE=y
CONFIG_MQTT_USE_CUSTOM_CONFIG=n
CONFIG_MQTT_TASK_CORE_SELECTION_ENABLED=y
CONFIG_MQTT_TASK_CORE_0=y
CONFIG_MQTT_TASK_CORE_1=n
CONFIG_MQTT_CUSTOM_OUTBOX=n

#
# SSL Configuration
#
CONFIG_MBEDTLS_KEY_EXCHANGE_RSA=y
CONFIG_MBEDTLS_KEY_EXCHANGE_ELLIPTIC_CURVE=y
CONFIG_MBEDTLS_ECDH_C=y
CONFIG_MBEDTLS_ECDSA_C=y
CONFIG_MBEDTLS_ECP_C=y
CONFIG_MBEDTLS_HAVE_TIME=y

#
# Heap Memory Configuration
#
CONFIG_HEAP_MEMORY_PROTECTION=y
CONFIG_HEAP_POISONING_COMPREHENSIVE=n
CONFIG_HEAP_POISONING_LIGHT=y
CONFIG_HEAP_ABORT_WHEN_ALLOCATION_FAILS=y

#
# Memory debugging
#
CONFIG_MALLOC_MEASURED=n
CONFIG_MALLOC_MEMLEAK_ESTIMATOR=n

#
# Component config
#

#
# TCP/IP Adapter Configuration
#
CONFIG_LWIP_NETIF_LOOPBACK=y
CONFIG_LWIP_NETIF_LOOPBACK_MULTITHREADING=y
CONFIG_LWIP_MAX_ACTIVE_TCP=16
CONFIG_LWIP_MAX_LISTENING_TCP=16
CONFIG_LWIP_TCP_HIGH_SPEED_RETRANSMISSION=n
CONFIG_LWIP_TCP_RTO_TIME=3000
CONFIG_LWIP_IP_FRAG_MAX_MTU=1500
CONFIG_LWIP_ND6_NUM_NEIGHBORS=5

#
# Crypto Hardware Support
#
CONFIG_MBEDTLS_AES_C=y
CONFIG_MBEDTLS_SHA1_C=y
CONFIG_MBEDTLS_SHA256_C=y
CONFIG_MBEDTLS_SHA512_C=y

#
# Asserts and debug options
#
CONFIG_COMPILER_OPTIMIZATION_DEFAULT=y
CONFIG_COMPILER_OPTIMIZATION_ASSERTIONS_ENABLE=y
CONFIG_COMPILER_OPTIMIZATION_ASSERTIONS_SILENT=n
CONFIG_COMPILER_OPTIMIZATION_ASSERTIONS_VERBOSE=n

#
# Runtime Stack Overflow Checking
#
CONFIG_STACK_CHECK_NONE=n
CONFIG_STACK_CHECK_NORM=n
CONFIG_STACK_CHECK_STRONG=y
CONFIG_STACK_CHECK_ALL=n

#
# Debugging
#
CONFIG_OPTIMIZATION_LEVEL_DEBUG=y
CONFIG_OPTIMIZATION_LEVEL_RELEASE=n

#
# System Configuration
#
CONFIG_ESP_SYSTEM_RTC_EXT_CRYST_ADDIT_CURRENT=0
CONFIG_ESP_SYSTEM_RTC_EXT_CRYST_ADDIT_CURRENT_DFT=y
CONFIG_ESP_SYSTEM_RTC_FAST_MEM_AS_HEAP_DEPCHECK=y
CONFIG_ESP_SYSTEM_ALLOW_RTC_FAST_MEM_AS_HEAP=y

#
# Main XTAL frequency
#
CONFIG_ESP32_XTAL_FREQ_AUTO=y
CONFIG_ESP32_XTAL_FREQ=0

#
# App startup config
#
CONFIG_APP_ROLLBACK_ENABLE=n
CONFIG_APP_ANTI_ROLLBACK=n
CONFIG_BOOTLOADER_APP_ANTI_ROLLBACK=n
CONFIG_APP_SECURE_BOOT_ENABLED=n
CONFIG_SECURE_BOOT_V2_ENABLED=n

#
# Networking
#
CONFIG_LWIP_PPP_SUPPORT=n
CONFIG_LWIP_IPV6=y
CONFIG_LWIP_DHCP=y
CONFIG_LWIP_DHCP_MAX_NTP_SERVERS=1

#
# Performance Monitoring
#
CONFIG_PERF_MONITOR_ENABLE=n

#
# Unit Testing Configuration
#
CONFIG_UNITY_ENABLE_IPC0_ON_02=n
CONFIG_UNITY_ENABLE_IPC1_ON_02=n

#
# Event Loop Library
#
CONFIG_ESP_EVENT_POST_FROM_ISR=n
CONFIG_ESP_EVENT_POST_FROM_IRAM_ISR=n

#
# ESP HTTP Client
#
CONFIG_ESP_HTTP_CLIENT_ENABLE_HTTPS=y

#
# Sensor Specific Configuration
#

# I2C Bus Configuration (for SHT31)
CONFIG_I2C_ENABLE_DEBUG_LOG=n
CONFIG_I2C_ISR_IRAM_SAFE=y

# ADC Configuration (for MQ135)
CONFIG_ADC_CALIBRATION_ENABLE=y
CONFIG_ADC_CAL_CHARACTERIZE_USING_EFUSE_VAL=y
CONFIG_ADC_CAL_MANAGER_ENABLED=y
CONFIG_ADC_CONTINUOUS_EDMA_SUPPORT=y

#
# End of Custom Configuration
#
